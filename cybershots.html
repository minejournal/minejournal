<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cybershots</title>
    <link rel="preload" href="SFONDO.webp" as="image">
    <style>
        @font-face {
            font-family: 'Dejavu';
            src: url('Dejavu.ttf') format('truetype');
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            width: 100%;
            overflow: hidden;
            font-family: Arial, sans-serif;
            background-color: black; /* Set the background color to black */
        }

        .gallery-container {
            position: fixed;
            top: 1%;
            width: 100vw;
            height: 12vh;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .gallery {
            display: flex;
            gap: 10px;
            overflow: hidden;
            white-space: nowrap;
            will-change: scroll-position;
        }

        .gallery img {
            width: 100px;
            height: 66px;
            object-fit: cover;
            cursor: pointer;
            transition: transform 0.3s ease;
            margin-right: 10px;
        }

        .gallery img:hover {
            transform: scale(1.05);
        }

        /* Center Image */
        .center-image {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 80vw; /* Adjust maximum size for better mobile display */
            max-height: 80vh;
            background: #fff;
            border: 1px solid #ddd;
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.2);
            display: none;
            z-index: 2000;
            object-fit: contain;
        }

        .right-edge-text {
            position: fixed;
            bottom: 10px; /* Position text at the bottom to avoid overlaying the gallery */
            right: 10px;
            max-width: 90vw; /* Make text responsive */
            padding: 10px;
            background: rgba(0, 0, 0, 0.5); /* Semi-transparent background */
            text-align: left;
            color: white; /* Set text color to white for better contrast */
            font-size: 14px;
            font-family: 'Dejavu', monospace;
            z-index: 2100; /* Ensure text appears above other elements */
        }

        /* Media query for mobile adjustments */
        @media (max-width: 768px) {
            .gallery img {
                width: 80px;
                height: 52px;
            }
            .center-image {
                max-width: 90vw;
                max-height: 70vh;
            }
            .right-edge-text {
                font-size: 12px;
                padding: 8px;
            }
        }
    </style>
</head>
<body>

<div class="gallery-container">
    <div class="gallery" id="gallery">
        <!-- 25 Images for the gallery -->
        <img src="1.JPG" alt="Image 1">
        <img src="2.JPG" alt="Image 2">
        <img src="3.JPG" alt="Image 3">
        <!-- ... additional images ... -->
        <img src="24.JPG" alt="Image 24">
        <img src="25.JPG" alt="Image 25">
    </div>
</div>

<img id="center-image" class="center-image" src="" alt="Center Image">

<div class="right-edge-text">
    <p>Samples of life and actions in the streets of the Republic of Georgia and Italy, 2024</p>
</div>

<script>
    const gallery = document.getElementById('gallery');
    const centerImage = document.getElementById('center-image');
    const images = Array.from(gallery.children);
    const marginRight = 10; // Space between images
    const imageWidth = images[0].offsetWidth + marginRight; // Image width including margin
    let scrollSpeed = 0;
    let isScrolling = false;
    let lastScrollTime = 0;
    const throttleDelay = 100; // milliseconds

    function cloneImages() {
        const clonedImages = images.map(img => img.cloneNode(true));
        gallery.append(...clonedImages);
        gallery.prepend(...clonedImages.map(img => img.cloneNode(true)));
    }

    function smoothScroll() {
        if (Math.abs(scrollSpeed) > 0.1) {
            gallery.scrollLeft += scrollSpeed;
            scrollSpeed *= 0.9; // Gradual stopping, adjusted for better mobile feel
            requestAnimationFrame(smoothScroll);
        } else {
            isScrolling = false;
        }

        const scrollWidth = gallery.scrollWidth;
        const containerWidth = gallery.offsetWidth;
        if (gallery.scrollLeft >= scrollWidth / 2) {
            gallery.scrollLeft -= scrollWidth / 2;
        } else if (gallery.scrollLeft < 0) {
            gallery.scrollLeft += scrollWidth / 2;
        }

        // Update center image
        const leftEdge = gallery.scrollLeft;
        const centerIndex = Math.floor((leftEdge + containerWidth / 2) / imageWidth) % images.length;
        const adjustedIndex = (centerIndex + images.length) % images.length;
        const currentImage = images[adjustedIndex];

        if (currentImage) {
            centerImage.src = currentImage.src;
            centerImage.style.display = 'block';
        }
    }

    function handleScroll(event) {
        const now = Date.now();
        if (now - lastScrollTime < throttleDelay) return;
        lastScrollTime = now;

        event.preventDefault();
        scrollSpeed += (event.deltaY || event.deltaX) * 0.05; // Slower sensitivity for better control

        if (!isScrolling) {
            isScrolling = true;
            requestAnimationFrame(smoothScroll);
        }
    }

    function handleTouchStart(event) {
        if (event.touches.length > 0) {
            this.startX = event.touches[0].pageX;
            event.preventDefault();
        }
    }

    function handleTouchMove(event) {
        if (event.touches.length > 0) {
            const touch = event.touches[0];
            const deltaX = touch.pageX - this.startX;
            this.startX = touch.pageX;
            scrollSpeed += deltaX * 0.1; // Adjust touch sensitivity for smooth scrolling
            event.preventDefault();

            if (!isScrolling) {
                isScrolling = true;
                requestAnimationFrame(smoothScroll);
            }
        }
    }

    cloneImages();
    document.addEventListener('wheel', handleScroll, { passive: false });
    document.addEventListener('touchstart', handleTouchStart, { passive: false });
    document.addEventListener('touchmove', handleTouchMove, { passive: false });

    function initializeCenterImage() {
        const containerWidth = gallery.offsetWidth;
        const initialIndex = Math.floor((gallery.scrollLeft + containerWidth / 2) / imageWidth) % images.length;
        const adjustedIndex = (initialIndex + images.length) % images.length;
        const initialImage = images[adjustedIndex];

        if (initialImage) {
            centerImage.src = initialImage.src;
            centerImage.style.display = 'block';
        }
    }

    initializeCenterImage();
</script>

</body>
</html>
