<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cybershots</title>
    <link rel="preload" href="SFONDO.webp" as="image">
    <style>
        @font-face {
            font-family: 'Dejavu';
            src: url('Dejavu.ttf') format('truetype');
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            width: 100%;
            overflow: hidden; /* Prevents default scrollbars */
            font-family: Arial, sans-serif;
        }

        body {
            position: relative;
            background-image: url('SFONDO.webp'); /* Background image for the entire page */
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
        }

        .gallery-container {
            position: fixed;
            top: 1%; /* Positioned close to the top */
            width: 100vw;
            height: 12vh; /* Adjust the height of the gallery */
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .gallery {
            display: flex;
            gap: 10px; /* Space between images */
            overflow: hidden; /* Hides scrollbar */
            white-space: nowrap; /* Ensures images stay in a single line */
            will-change: scroll-position; /* Optimizes scrolling performance */
        }

        .gallery img {
            width: 100px; /* 3:2 aspect ratio */
            height: 66px;
            object-fit: cover;
            cursor: pointer;
            transition: transform 0.3s ease; /* Scale effect on hover */
            margin-right: 10px;
        }

        .gallery img:hover {
            transform: scale(1.05);
        }

        /* Center Image */
        .center-image {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            max-width: 50vw; /* Maximum width relative to viewport width */
            max-height: 95vh; /* Maximum height relative to viewport height */
            background: #fff; /* Background color */
            border: 1px solid #ddd; /* Border color */
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.2); /* Adjusted shadow for better performance */
            display: none;
            z-index: 2000;
            object-fit: contain; /* Ensures aspect ratio is maintained */
        }

        .right-edge-text {
            position: fixed;
            top: 47%;
            right: 50px;
            transform: translateY(-50%);
            max-width: 20vw;
            padding: 10px;
            background: transparent;
            text-align: left;
            color: black;
            font-size: 16px;
            font-family: 'Dejavu', monospace;
        }
    </style>
</head>
<body>

<div class="gallery-container">
    <div class="gallery" id="gallery">
        <!-- 25 Images for the gallery with 3:2 aspect ratio -->
        <img src="1.JPG" alt="Image 1">
        <img src="2.JPG" alt="Image 2">
        <img src="3.JPG" alt="Image 3">
        <img src="4.JPG" alt="Image 4">
        <img src="5.JPG" alt="Image 5">
        <img src="6.JPG" alt="Image 6">
        <img src="7.JPG" alt="Image 7">
        <img src="8.JPG" alt="Image 8">
        <img src="9.JPG" alt="Image 9">
        <img src="10.JPG" alt="Image 10">
        <img src="11.JPG" alt="Image 11">
        <img src="12.JPG" alt="Image 12">
        <img src="13.JPG" alt="Image 13">
        <img src="14.JPG" alt="Image 14">
        <img src="15.JPG" alt="Image 15">
        <img src="16.JPG" alt="Image 16">
        <img src="17.JPG" alt="Image 17">
        <img src="18.JPG" alt="Image 18">
        <img src="19.JPG" alt="Image 19">
        <img src="20.JPG" alt="Image 20">
        <img src="21.JPG" alt="Image 21">
        <img src="22.JPG" alt="Image 22">
        <img src="23.JPG" alt="Image 23">
        <img src="24.JPG" alt="Image 24">
        <img src="25.JPG" alt="Image 25">
    </div>
</div>

<img id="center-image" class="center-image" src="" alt="Center Image">

<div class="right-edge-text">
    <p>Samples of life and actions in the streets of the Republic of Georgia and Italy, 2024</p>
</div>

<script>
    const gallery = document.getElementById('gallery');
    const centerImage = document.getElementById('center-image');
    const images = Array.from(gallery.children);
    const marginRight = 10; // Space between images
    const imageWidth = images[0].offsetWidth + marginRight; // Image width including margin
    let scrollSpeed = 0;
    let isScrolling = false;
    let lastScrollTime = 0;
    const throttleDelay = 100; // milliseconds

    function cloneImages() {
        const clonedImages = images.map(img => img.cloneNode(true));
        gallery.append(...clonedImages);
        gallery.prepend(...clonedImages.map(img => img.cloneNode(true)));
    }

    function smoothScroll() {
        if (Math.abs(scrollSpeed) > 0.1) {
            gallery.scrollLeft += scrollSpeed;
            scrollSpeed *= 0.95; // Gradual stopping
            requestAnimationFrame(smoothScroll);
        } else {
            isScrolling = false;
        }

        // Continuous scrolling
        const scrollWidth = gallery.scrollWidth;
        const containerWidth = gallery.offsetWidth;
        if (gallery.scrollLeft >= scrollWidth / 2) {
            gallery.scrollLeft -= scrollWidth / 2;
        } else if (gallery.scrollLeft < 0) {
            gallery.scrollLeft += scrollWidth / 2;
        }

        // Update center image
        const leftEdge = gallery.scrollLeft;
        const centerIndex = Math.floor((leftEdge + containerWidth / 2) / imageWidth) % images.length;
        const adjustedIndex = (centerIndex + images.length) % images.length;
        const currentImage = images[adjustedIndex];

        if (currentImage) {
            centerImage.src = currentImage.src;
            centerImage.style.display = 'block';
        }
    }

    function handleScroll(event) {
        const now = Date.now();
        if (now - lastScrollTime < throttleDelay) return;
        lastScrollTime = now;

        event.preventDefault();
        scrollSpeed += (event.deltaY || event.deltaX) * 0.1; // Adjust scroll sensitivity

        if (!isScrolling) {
            isScrolling = true;
            requestAnimationFrame(smoothScroll);
        }
    }

    function handleTouch(event) {
        if (event.touches.length > 0) {
            const touch = event.touches[0];
            if (!this.startX) {
                this.startX = touch.pageX;
            }
            const deltaX = touch.pageX - this.startX;
            scrollSpeed += deltaX * 0.2; // Adjust sensitivity
            this.startX = touch.pageX;
            event.preventDefault();

            if (!isScrolling) {
                isScrolling = true;
                requestAnimationFrame(smoothScroll);
            }
        }
    }

    cloneImages();
    document.addEventListener('wheel', handleScroll, { passive: false });
    document.addEventListener('touchstart', handleTouch, { passive: false });
    document.addEventListener('touchmove', handleTouch, { passive: false });

    function initializeCenterImage() {
        const containerWidth = gallery.offsetWidth;
        const initialIndex = Math.floor((gallery.scrollLeft + containerWidth / 2) / imageWidth) % images.length;
        const adjustedIndex = (initialIndex + images.length) % images.length;
        const initialImage = images[adjustedIndex];

        if (initialImage) {
            centerImage.src = initialImage.src;
            centerImage.style.display = 'block';
        }
    }

    initializeCenterImage();
</script>

</body>
</html>
